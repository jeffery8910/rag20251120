<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>RAG å·¥ä½œåŠï½œGemini + Pinecone + LINE å¿«é€Ÿéƒ¨ç½²</title>
  <style>
    :root {
      --bg:#0f172a;--card:#111827;--accent:#22d3ee;--text:#e5e7eb;--muted:#94a3b8;
      font-family:"JetBrains Mono","Segoe UI",system-ui;
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(120% 120% at 10% 10%,#1e293b,#0b1224);}
    main{max-width:1100px;margin:32px auto;padding:0 20px;color:var(--text);}
    h1{display:flex;gap:12px;align-items:center;font-size:28px;margin:0 0 12px;}
    section{background:var(--card);border:1px solid #1f2937;border-radius:14px;padding:18px;margin-bottom:14px;box-shadow:0 10px 30px rgba(0,0,0,.35);}
    .step{display:grid;grid-template-columns:64px 1fr;gap:14px;align-items:center;}
    .badge{width:48px;height:48px;border-radius:12px;background:linear-gradient(135deg,#22d3ee,#0ea5e9);display:flex;align-items:center;justify-content:center;font-weight:700;color:#0b1224;}
    .code{background:#0b1224;border:1px solid #1f2937;border-radius:10px;padding:14px;font-size:13px;overflow:auto;}
    .btn{background:var(--accent);color:#0b1224;border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:12px;margin-top:10px;}
    .tag{display:inline-block;padding:6px 10px;border-radius:999px;background:#1e293b;color:var(--muted);font-size:12px;}
  </style>
</head>
<body>
<main>
  <h1>ğŸš€ RAG å·¥ä½œåŠï½œGemini + Pinecone + LINE å¿«é€Ÿéƒ¨ç½²</h1>

  <section class="step">
    <div class="badge">1</div>
    <div>
      <strong>å»º Pinecone serverless index</strong><br>
      <span class="tag">console.pinecone.io</span>
      <ul>
        <li>Nameï¼š<code>g-workshop</code>ï¼ˆç¤ºä¾‹ï¼‰</li>
        <li>Cloud/Regionï¼šAWS / <code>us-east-1</code></li>
        <li>Dimensionï¼š<code>768</code>ï¼ˆå°æ‡‰ <code>text-embedding-004</code>ï¼‰</li>
        <li>Metricï¼šcosine</li>
      </ul>
    </div>
  </section>

  <section class="step">
    <div class="badge">2</div>
    <div>
      <strong>æº–å‚™ç’°å¢ƒè®Šæ•¸ï¼ˆGemini + Pinecone + LINEï¼‰</strong>
      <div class="code" id="env">
ADMIN_TOKEN=changeme
GEMINI_API_KEY=your_gemini_key
EMBED_MODEL=text-embedding-004
GEN_MODEL=gemini-2.5-flash
VECTOR_BACKEND=pinecone
PINECONE_API_KEY=your_pinecone_key
PINECONE_INDEX=g-workshop
PINECONE_ENV=us-east-1
LINE_CHANNEL_SECRET=your_line_secret
LINE_CHANNEL_ACCESS_TOKEN=your_line_token
TOPK=6
SCORE_THRESHOLD=0.35
      </div>
      <button class="btn" onclick="copyEnv()">è¤‡è£½ env</button>
    </div>
  </section>

  <section class="step">
    <div class="badge">3</div>
    <div>
      <strong>éƒ¨ç½² cloud-appï¼ˆæ“‡ä¸€ï¼‰</strong>
      <div class="grid">
        <div>
          <h4>Vercel</h4>
          <ol>
            <li>åŒ¯å…¥ GitHub å°ˆæ¡ˆï¼ˆæ ¹ç›®éŒ„å³ cloud-appï¼‰ã€‚</li>
            <li>Node ç‰ˆæœ¬ 20ï¼Œå¡«å…¥ä¸Šæ–¹ envã€‚</li>
            <li>éƒ¨ç½²å¾Œ Webhookï¼š<code>https://&lt;app&gt;.vercel.app/api/line-webhook</code></li>
          </ol>
        </div>
        <div>
          <h4>Render</h4>
          <ol>
            <li>å»ºç«‹ Web Serviceï¼Œæ ¹ç›®éŒ„ï¼ŒNode 20ã€‚</li>
            <li>è²¼ä¸Š envï¼›ä¿æŒ <code>startCommand</code>=<code>npm start</code>ã€‚</li>
            <li>Webhookï¼š<code>https://&lt;service&gt;.onrender.com/api/line-webhook</code></li>
          </ol>
        </div>
      </div>
      <p class="tag">å®Œæˆå¾Œï¼šç”¨ LINE Developers å°‡ Webhook æŒ‡å‘éƒ¨ç½²ç¶²å€ã€‚</p>
    </div>
  </section>

  <section class="step">
    <div class="badge">4</div>
    <div>
      <strong>/admin é©—æ”¶</strong>
      <ol>
        <li>ç™»å…¥ <code>/admin</code> è¼¸å…¥ <code>ADMIN_TOKEN</code>ã€‚</li>
        <li>ä¸Šå‚³æ•™æï¼ˆchunkSize 800 / overlap 120ï¼‰ï¼Œç¢ºèªã€Œæ’å…¥æ•¸é‡ã€>0ã€‚</li>
        <li>ç·šä¸Šæ¸¬è©¦è¼¸å…¥ã€Œé€™ä»½æ•™æçš„ä¸‰å€‹é‡é»ï¼Ÿã€æ‡‰å›è¦†å«ä¾†æºã€‚</li>
        <li>LINE å¯¦æ¸¬ï¼šå•æ•™æå…§å¤–å•é¡Œï¼Œå¤–éƒ¨å•é¡Œæ‡‰å›ã€ŒæŸ¥ç„¡è³‡æ–™ã€ã€‚</li>
      </ol>
      <div class="grid">
        <div class="code">GET /api/health?withDb=1</div>
        <div class="code">PINECONE_API_KEY=... npx ts-node scripts/ingest-pinecone.ts ./data</div>
      </div>
    </div>
  </section>

  <section class="step">
    <div class="badge">5</div>
    <div>
      <strong>/admin å…§å»ºäº’å‹•æ¨¡æ¿</strong>
      <p class="tag">åœ¨ã€Œæ¸¬è©¦ï¼èŠå¤©ã€åˆ†é ï¼Œé»å³ä¸Šå…­å€‹æŒ‰éˆ•å¯ç›´æ¥ç”Ÿæˆï¼š</p>
      <div class="grid">
        <div class="code">ç”Ÿæˆæ‘˜è¦ï¼š200 å­— + 3 é‡é» + ä¾†æº</div>
        <div class="code">ç”Ÿæˆå–®é¸é¡Œï¼š3 é¡Œ MCQ + ç­”æ¡ˆ + ç†ç”±</div>
        <div class="code">ç”Ÿæˆæ¢åˆ—ï¼š5 æ¢ç­†è¨˜ + é ç¢¼</div>
        <div class="code">ç”Ÿæˆå»ºè­°ï¼š5 æ¢ä¸‹ä¸€æ­¥å»ºè­° + é ç¢¼</div>
        <div class="code">ç”Ÿæˆè¡¨æ ¼ï¼šheaders + rows + source</div>
        <div class="code">ç”Ÿæˆæ™‚é–“ç·šï¼šäº‹ä»¶ï¼æ—¥æœŸï¼æè¿°ï¼é ç¢¼</div>
      </div>
      <p class="tag">ä¸éœ€è¤‡è£½è²¼ä¸Šï¼Œç›´æ¥é»æŒ‰éˆ•å³å¯é€å‡º RAG + LLM JSONï¼Œå‰ç«¯è‡ªå‹•æ¸²æŸ“å°æ‡‰è¦–çª—ã€‚</p>
    </div>
  </section>

</main>
<script>
function copyEnv(){
  const t=document.getElementById('env').innerText.trim();
  navigator.clipboard.writeText(t).then(()=>alert('ç’°å¢ƒè®Šæ•¸å·²è¤‡è£½'));
}
</script>
</body>
</html>
